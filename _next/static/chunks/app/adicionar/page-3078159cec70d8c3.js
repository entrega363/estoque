(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{2800:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),r=a(2115),o=a(6874),i=a.n(o),n=a(8999),l=a(3168);function d(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)({codigo:"",nome:"",quantidade:1,categoria:"Informatica"}),[o,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),g=async a=>{a.preventDefault(),d(!0);try{if(await l.mB.checkCodeExists(t.codigo)){alert("J\xe1 existe um equipamento com este c\xf3digo!"),d(!1);return}await l.mB.create({codigo:t.codigo,nome:t.nome,quantidade:t.quantidade,categoria:t.categoria,foto:t.foto}),m(!0),setTimeout(()=>{e.push("/")},2e3)}catch(a){console.error("Erro ao salvar equipamento:",a);try{let a={id:Date.now().toString(),codigo:t.codigo,nome:t.nome,quantidade:t.quantidade,categoria:t.categoria,foto:t.foto},s=JSON.parse(localStorage.getItem("estoque-equipamentos")||"[]");if(s.some(e=>e.codigo===t.codigo)){alert("J\xe1 existe um equipamento com este c\xf3digo!"),d(!1);return}let r=[...s,a];localStorage.setItem("estoque-equipamentos",JSON.stringify(r)),m(!0),setTimeout(()=>{e.push("/")},2e3)}catch(e){console.error("Erro ao salvar no localStorage:",e),alert("Erro ao salvar equipamento. Tente novamente."),d(!1)}}},h=e=>{let{name:t,value:s}=e.target;a(e=>({...e,[t]:"quantidade"===t?parseInt(s)||1:s}))},p=e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){if(!s.type.startsWith("image/"))return void alert("Por favor, selecione apenas arquivos de imagem.");if(s.size>5242880)return void alert("A imagem deve ter no m\xe1ximo 5MB.");let e=new FileReader;e.onload=e=>{var t;let s=null==(t=e.target)?void 0:t.result;x(s),a(e=>({...e,foto:s}))},e.readAsDataURL(s)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 p-4",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)(i(),{href:"/",className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center hover:bg-gray-200 transition-colors !rounded-button",children:(0,s.jsx)("i",{className:"ri-arrow-left-line text-gray-600 text-xl"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Adicionar Equipamento"})]}),c&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-green-100 border border-green-200 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("i",{className:"ri-check-circle-fill text-green-500 text-xl"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-green-800",children:"Sucesso!"}),(0,s.jsx)("p",{className:"text-sm text-green-600",children:"Equipamento adicionado ao estoque"})]})]})}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C\xf3digo do Item"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",name:"codigo",value:t.codigo,onChange:h,placeholder:"Ex: ATT-X200304",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e=Date.now().toString().slice(-6);a(t=>({...t,codigo:"".concat("ATT-X").concat(e)}))},className:"px-4 py-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-colors !rounded-button",title:"Gerar c\xf3digo autom\xe1tico",children:(0,s.jsx)("i",{className:"ri-refresh-line"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Equipamento"}),(0,s.jsx)("input",{type:"text",name:"nome",value:t.nome,onChange:h,placeholder:"Ex: Notebook Dell Inspiron",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>a(e=>({...e,quantidade:Math.max(1,e.quantidade-1)})),className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center hover:bg-gray-200 transition-colors !rounded-button",children:(0,s.jsx)("i",{className:"ri-subtract-line text-gray-600"})}),(0,s.jsx)("input",{type:"number",name:"quantidade",value:t.quantidade,onChange:h,min:"1",className:"flex-1 text-center px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>a(e=>({...e,quantidade:e.quantidade+1})),className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center hover:bg-gray-200 transition-colors !rounded-button",children:(0,s.jsx)("i",{className:"ri-add-line text-gray-600"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("select",{name:"categoria",value:t.categoria,onChange:h,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent appearance-none bg-white",required:!0,children:["Informatica","Perifericos","Impressao","Mobiliario","Eletronicos","Outros"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)("i",{className:"ri-arrow-down-s-line text-gray-400"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto do Equipamento (Opcional)"}),u?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-full h-32 bg-gray-100 rounded-xl overflow-hidden",children:(0,s.jsx)("img",{src:u,alt:"Preview do equipamento",className:"w-full h-full object-cover"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{x(null),a(e=>({...e,foto:void 0}))},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors !rounded-button",title:"Remover foto",children:(0,s.jsx)("i",{className:"ri-close-line text-sm"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=document.getElementById("photo-upload-replace"))?void 0:e.click()},className:"absolute bottom-2 right-2 px-3 py-1 bg-white bg-opacity-90 text-gray-700 text-xs rounded-full hover:bg-opacity-100 transition-colors !rounded-button",children:"Alterar"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:p,className:"hidden",id:"photo-upload-replace"})]}):(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:p,className:"hidden",id:"photo-upload"}),(0,s.jsxs)("label",{htmlFor:"photo-upload",className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-green-400 hover:bg-green-50 transition-colors",children:[(0,s.jsx)("i",{className:"ri-camera-line text-3xl text-gray-400 mb-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Clique para adicionar foto"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG at\xe9 5MB"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Pr\xe9-visualiza\xe7\xe3o:"}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[u&&(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("div",{className:"w-full h-24 bg-gray-100 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:u,alt:"Preview do equipamento",className:"w-full h-full object-cover"})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:u?(0,s.jsx)("img",{src:u,alt:"\xcdcone do equipamento",className:"w-full h-full object-cover rounded-xl"}):(0,s.jsx)("i",{className:"ri-computer-line text-green-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-800",children:t.nome||"Nome do equipamento"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:t.codigo||"C\xf3digo do item"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-green-500",children:t.quantidade}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"unidades"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-600 text-xs rounded-full",children:t.categoria}),(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-600 text-xs rounded-full font-medium",children:"Dispon\xedvel"})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:o||c,className:"w-full bg-green-500 text-white py-4 rounded-2xl font-medium shadow-lg hover:bg-green-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed !rounded-button flex items-center justify-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adicionando..."]}):c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"ri-check-line text-xl"}),"Adicionado com Sucesso!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"ri-add-line text-xl"}),"Adicionar ao Estoque"]})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"A\xe7\xf5es R\xe1pidas"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{className:"p-3 bg-blue-50 text-blue-600 rounded-xl text-sm font-medium hover:bg-blue-100 transition-colors !rounded-button",children:[(0,s.jsx)("i",{className:"ri-scan-line text-lg mb-1 block"}),"Escanear QR"]}),(0,s.jsxs)("button",{className:"p-3 bg-purple-50 text-purple-600 rounded-xl text-sm font-medium hover:bg-purple-100 transition-colors !rounded-button",children:[(0,s.jsx)("i",{className:"ri-file-excel-line text-lg mb-1 block"}),"Importar Excel"]})]})]})]})})}},3168:(e,t,a)=>{"use strict";a.d(t,{mB:()=>r,tn:()=>o});let s=(0,a(5647).UU)("https://thtknmmhtfjikzxznjxi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRodGtubW1odGZqaWt6eHpuanhpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1OTU0MjYsImV4cCI6MjA2ODE3MTQyNn0.Aex9osM2zlneafmSUtmeOt-4pEFOB4JOIeqQdvdKSkA"),r={async getAll(){let{data:e,error:t}=await s.from("equipamentos").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async create(e){let{data:t,error:a}=await s.from("equipamentos").insert([e]).select();if(a)throw a;return null==t?void 0:t[0]},async update(e,t){let{data:a,error:r}=await s.from("equipamentos").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select();if(r)throw r;return null==a?void 0:a[0]},async delete(e){let{error:t}=await s.from("equipamentos").delete().eq("id",e);if(t)throw t},async checkCodeExists(e){let{data:t,error:a}=await s.from("equipamentos").select("id").eq("codigo",e).limit(1);if(a)throw a;return((null==t?void 0:t.length)||0)>0}},o={async getAll(){let{data:e,error:t}=await s.from("equipamentos_utilizados").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async create(e){let{data:t,error:a}=await s.from("equipamentos_utilizados").insert([e]).select();if(a)throw a;return null==t?void 0:t[0]},async return(e){let{error:t}=await s.from("equipamentos_utilizados").delete().eq("id",e);if(t)throw t}}},9431:(e,t,a)=>{Promise.resolve().then(a.bind(a,2800))}},e=>{var t=t=>e(e.s=t);e.O(0,[988,441,684,358],()=>t(9431)),_N_E=e.O()}]);